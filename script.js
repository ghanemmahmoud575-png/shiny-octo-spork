const TABLE = {
  C:{0:0,1:23.84,2:25.61,3:27.39,4:29.16,5: 30.93,
6: 32.7,
7: 34.48,
8: 36.25,
9: 38.02,
10: 39.79,
11: 41.57,
12: 43.34,
13: 45.11,
14: 46.88,
15: 48.66,
16: 50.43,
17: 52.2,
18: 53.97,
19: 55.75,
20: 57.52,
21: 59.29,
22: 61.06,
23: 62.83,
24: 64.61,
25: 66.38,
26: 68.15,
27: 69.92,
28: 71.69,
29: 73.47,
30: 75.24,
31: 77.01,
32: 78.78,
33: 80.55,
34: 82.33,
35: 84.11,
36: 85.89,
37: 87.66,
38: 89.44,
39: 91.22,
40: 92.99,
41: 94.77,
42: 96.55,
43: 98.32,
44: 100.1,
45: 101.88,
46: 103.65,
47: 105.43,
48: 107.21,
49: 108.98,
50: 110.76,
51: 112.54,
52: 114.32,
53: 116.1,
54: 117.88,
55: 119.66,
56: 121.44,
57: 123.22,
58: 124.99,
59: 126.77,
60: 128.55,
61: 130.33,
62: 132.11,
63: 133.89,
64: 135.67,
65: 137.45,
66: 139.23,
67: 141,
68: 142.78,
69: 144.56,
70: 146.34,
71: 148.12,
72: 149.89,
73: 151.67,
74: 153.45,
75: 155.22,
76: 157,
77: 158.78,
78: 160.55,
79: 162.33,
80: 164.11,
81: 165.89,
82: 167.66,
83: 169.44,
84: 171.22,
85: 172.99,
86: 174.77,
87: 176.55,
88: 178.32,
89: 180.1,
90: 181.88,
91: 183.65,
92: 185.43,
93: 187.21,
94: 188.98,
95: 190.76,
96: 192.53,
97: 194.3,
98: 196.07,
99: 197.84,
100: 199.62,
101: 201.39,
102: 203.16,
103: 204.93,
104: 206.7,
105: 208.48,
106: 210.25,
107: 212.02,
108: 213.79,
109: 215.56,
110: 217.34,
111: 219.11,
112: 220.88,
113: 222.65,
114: 224.42,
115: 226.2,
116: 227.97,
117: 229.74,
118: 231.51,
119: 233.28,
120: 235.06,
121: 236.83,
122: 238.6,
123: 240.37,
124: 242.15,
125: 243.92,
126: 245.69,
127: 247.46,
128: 249.23,
129: 251.01,
130: 252.78,
131: 254.55,
132: 256.32,
133: 258.09,
134: 259.87,
135: 261.64,
136: 263.41,
137: 265.18,
138: 266.95,
139: 268.72,
140: 270.49,
141: 272.26,
142: 274.03,
143: 275.79,
144: 277.56,
145: 279.33,
146: 281.1,
147: 282.87,
148: 284.63,
149: 286.4,
150: 288.17,
151: 289.94,
152: 291.71,
153: 293.47,
154: 295.24,
155: 297.01,
156: 298.78,
157: 300.55,
158: 302.31,
159: 304.08,
160: 305.85,
161: 307.62,
162: 309.39,
163: 311.15,
164: 312.92,
165: 314.69,
166: 316.46,
167: 318.23,
168: 319.99,
169: 321.76,
170: 323.53,
171: 325.3,
172: 327.07,
173: 328.83,
174: 330.6,
175: 332.37,
176: 334.14,
177: 335.91,
178: 337.67,
179: 339.44,
180: 341.21,
181: 342.98,
182: 344.75,
183: 346.51,
184: 348.28,
185: 350.05,
186: 351.82,
187: 353.59,
188: 355.35,
189: 357.12,
190: 358.89,
191: 360.66,
192: 362.43,
193: 364.19,
194: 365.96,
195: 367.73,
196: 369.5,
197: 371.27,
198: 373.03,
199: 374.8,
200: 376.57,
201: 378.34,
202: 380.11,
203: 381.87,
204: 383.64,
205: 385.41,
206: 387.18,
207: 388.95,
208: 390.71,
209: 392.48,
210: 394.25,
211: 396.02,
212: 397.79,
213: 399.55,
214: 401.32,
215: 403.09,
216: 404.86,
217: 406.63,
218: 408.39,
219: 410.16,
220: 411.93,
221: 413.7,
222: 415.47,
223: 417.23,
224: 419,
225: 420.77,
226: 422.54,
227: 424.31,
228: 426.07,
229: 427.84,
230: 429.61,
231: 431.38,
232: 433.15,
233: 434.91,
234: 436.68,
235: 438.45,
236: 440.22,
237: 441.99,
238: 443.75,
239: 445.52,
240: 447.29,
241: 449.06,
242: 450.83,
243: 452.59,
244: 454.36,
245: 456.13,
246: 457.9,
247: 459.67,
248: 461.43,
249: 463.2,
250: 464.97,
251: 466.74,
252: 468.51,
253: 470.27,
254: 472.04,
255: 473.81,
256: 475.58,
257: 477.35,
258: 479.11,
259: 480.88,
260: 482.65,
261: 484.42,
262: 486.19,
263: 487.95,
264: 489.72,
265: 491.49,
266: 493.26,
267: 495.03,
268: 496.79,
269: 498.56,
270: 500.33,
271: 502.1,
272: 503.87,
273: 505.63,
274: 507.4,
275: 509.17,
276: 510.94,
277: 512.71,
278: 514.47,
279: 516.24,
280: 518.01,
281: 519.78,
282: 521.55,
283: 523.31,
284: 525.08,
285: 526.85,
286: 528.62,
287: 530.39,
288: 532.15,
289: 533.92,
290: 535.69,
291: 537.45,
292: 539.22,
293: 540.98,
294: 542.75,
295: 544.51,
296: 546.28,
297: 548.04,
298: 549.81,
299: 551.57,
300: 553.34,
301: 555.1,
302: 556.87,
303: 558.64,
304: 560.4,
305: 562.17,
306: 563.93,
307: 565.7,
308: 567.46,
309: 569.23,
310: 570.99,
311: 572.76,
312: 574.52,
313: 576.29,
314: 578.05,
315: 579.82,
316: 581.58,
317: 583.35,
318: 585.11,
319: 586.88,
320: 588.64,
321: 590.41,
322: 592.17,
323: 593.94,
324: 595.7,
325: 597.47,
326: 599.23,
327: 601,
328: 602.76,
329: 604.53,
330: 606.29,
331: 608.06,
332: 609.82,
333: 611.59,
334: 613.36,
335: 615.12,
336: 616.89,
337: 618.65,
338: 620.42,
339: 622.18,
340: 623.95,
341: 625.71,
342: 627.48,
343: 629.24,
344: 631.01,
345: 632.77,
346: 634.54,
347: 636.3,
348: 638.07,
349: 639.83,
350: 641.6,
351: 643.36,
352: 645.13,
353: 646.89,
354: 648.66,
355: 650.42,
356: 652.19,
357: 653.95,
358: 655.72,
359: 657.48,
360: 659.25,
361: 661.01,
362: 662.78,
363: 664.54,
364: 666.31,
365: 668.07,
366: 669.84,
367: 671.61,
368: 673.37,
369: 675.14,
370: 676.9,
371: 678.67,
372: 680.43,
373: 682.2,
374: 683.96,
375: 685.73,
376: 687.49,
377: 689.26,
378: 691.02,
379: 692.79,
380: 694.55,
381: 696.32,
382: 698.08,
383: 699.85,
384: 701.61,
385: 703.38,
386: 705.14,
387: 706.91,
388: 708.67,
389: 710.44,
390: 712.2,
391: 713.97,
392: 715.73,
393: 717.5,
394: 719.26,
395: 721.03,
396: 722.79,
397: 724.56,
398: 726.32,
399: 728.09,
400: 729.86,
401: 731.62,
402: 733.39,
403: 735.15,
404: 736.92,
405: 738.68,
406: 740.45,
407: 742.21,
408: 743.98,
409: 745.74,
410: 747.51,
411: 749.27,
412: 751.04,
413: 752.8,
414: 754.57,
415: 756.33,
416: 758.1,
417: 759.86,
418: 761.63,
419: 763.39,
420: 765.16,
421: 766.92,
422: 768.69,
423: 770.45,
424: 772.22,
425: 773.98,
426: 775.75,
427: 777.51,
428: 779.28,
429: 781.04,
430: 782.81,
431: 784.57,
432: 786.34,
433: 788.11,
434: 789.87,
435: 791.64,
436: 793.4,
437: 795.17,
438: 796.93,
439: 798.7,
440: 800.46,
441: 802.23,
442: 804,
443: 805.77,
444: 807.54,
445: 809.31,
446: 811.08,
447: 812.85,
448: 814.62,
449: 816.38,
450: 818.15,
451: 819.92,
452: 821.69,
453: 823.46,
454: 825.23,
455: 827,
456: 828.77,
457: 830.54,
458: 832.31,
459: 834.08,
460: 835.85,
461: 837.62,
462: 839.39,
463: 841.16,
464: 842.93,
465: 844.7,
466: 846.46,
467: 848.23,
468: 850,
469: 851.77,
470: 853.54,
471: 855.31,
472: 857.08,
473: 858.85,
474: 860.62,
475: 862.39,
476: 864.16,
477: 865.93,
478: 867.7,
479: 869.47,
480: 871.24,
481: 873.01,
482: 874.78,
483: 876.54,
484: 878.31,
485: 880.08,
486: 881.85,
487: 883.62,
488: 885.39,
489: 887.16,
490: 888.93,
491: 890.7,
492: 892.47,
493: 894.24,
494: 896.01,
495: 897.78,
496: 899.55,
497: 901.32,
498: 903.09,
499: 904.85,
500: 906.62,
501: 908.39,
502: 910.16,
503: 911.93,
504: 913.7,
505: 915.47,
506: 917.24,
507: 919.01,
508: 920.78,
509: 922.55,
510: 924.32,
511: 926.09,
512: 927.86,
513: 929.63,
514: 931.4,
515: 933.17,
516: 934.93,
517: 936.7,
518: 938.47,
519: 940.24,
520: 942.01,
521: 943.78,
522: 945.55,
523: 947.32,
524: 949.09,
525: 950.86,
526: 952.63,
527: 954.4,
528: 956.17,
529: 957.94,
530: 959.71,
531: 961.48,
532: 963.25,
533: 965.01,
534: 966.78,
535: 968.55,
536: 970.32,
537: 972.09,
538: 973.86,
539: 975.63,
540: 977.4,
541: 979.17,
542: 980.94,
543: 982.71,
544: 984.48,
545: 986.25,
546: 988.02,
547: 989.79,
548: 991.56,
549: 993.32,
550: 995.09,
551: 996.86,
552: 998.63,
553: 1000.4,
554: 1002.17,
555: 1003.94,
556: 1005.71,
557: 1007.48,
558: 1009.25,
559: 1011.02,
560: 1012.79,
561: 1014.56,
562: 1016.33,
563: 1018.1,
564: 1019.87,
565: 1021.64,
566: 1023.4,
567: 1025.17,
568: 1026.94,
569: 1028.71,
570: 1030.48,
571: 1032.25,
572: 1034.02,
573: 1035.79,
574: 1037.56,
575: 1039.33,
576: 1041.1,
577: 1042.87,
578: 1044.64,
579: 1046.41,
580: 1048.18,
581: 1049.95,
582: 1051.72,
583: 1053.48,
584: 1055.25,
585: 1057.02,
586: 1058.79,
587: 1060.56,
588: 1062.33,
589: 1064.1,
590: 1065.87,
591: 1067.64,
592: 1069.41,
593: 1071.19,
594: 1072.96,
595: 1074.74,
596: 1076.51,
597: 1078.29,
598: 1080.06,
599: 1081.84,
600: 1083.61,
601: 1085.39,
602: 1087.16,
603: 1088.94,
604: 1090.71,
605: 1092.49,
606: 1094.26,
607: 1096.04,
608: 1097.81,
609: 1099.59,
610: 1101.36,
611: 1103.14,
612: 1104.91,
613: 1106.68,
614: 1108.46,
615: 1110.23,
616: 1112.01,
617: 1113.78,
618: 1115.56,
619: 1117.33,
620: 1119.11,
621: 1120.88,
622: 1122.66,
623: 1124.43,
624: 1126.21,
625: 1127.98,
626: 1129.76,
627: 1131.53,
628: 1133.31,
629: 1135.08,
630: 1136.86,
631: 1138.63,
632: 1140.41,
633: 1142.18,
634: 1143.96,
635: 1145.73,
636: 1147.51,
637: 1149.28,
638: 1151.06,
639: 1152.83,
640: 1154.61,
641: 1156.38,
642: 1158.16,
643: 1159.93,
644: 1161.7,
645: 1163.48,
646: 1165.25,
647: 1167.03,
648: 1168.8,
649: 1170.58,
650: 1172.35,
651: 1174.13,
652: 1175.9,
653: 1177.68,
654: 1179.45,
655: 1181.23,
656: 1183,
657: 1184.78,
658: 1186.55,
659: 1188.33,
660: 1190.1,
661: 1191.88,
662: 1193.65,
663: 1195.43,
664: 1197.2,
665: 1198.98,
666: 1200.75,
667: 1202.53,
668: 1204.3,
669: 1206.08,
670: 1207.85,
671: 1209.63,
672: 1211.4,
673: 1213.18,
674: 1214.95,
675: 1216.72,
676: 1218.5,
677: 1220.27,
678: 1222.05,
679: 1223.82,
680: 1225.6,
681: 1227.37,
682: 1229.15,
683: 1230.92,
684: 1232.7,
685: 1234.47,
686: 1236.25,
687: 1238.02,
688: 1239.8,
689: 1241.57,
690: 1243.35,
691: 1245.12,
692: 1246.9,
693: 1248.67,
694: 1250.45,
695: 1252.22,
696: 1254,
697: 1255.77,
698: 1257.55,
699: 1259.32,
700: 1261.1,
701: 1262.87,
702: 1264.65,
703: 1266.42,
704: 1268.2,
705: 1269.97,
706: 1271.75,
707: 1273.52,
708: 1275.29,
709: 1277.07,
710: 1278.84,
711: 1280.62,
712: 1282.39,
713: 1284.17,
714: 1285.94,
715: 1287.72,
716: 1289.49,
717: 1291.27,
718: 1293.04,
719: 1294.82,
720: 1296.59,
721: 1298.37,
722: 1300.14,
723: 1301.92,
724: 1303.69,
725: 1305.47,
726: 1307.24,
727: 1309.02,
728: 1310.79,
729: 1312.57,
730: 1314.34,
731: 1316.12,
732: 1317.89,
733: 1319.67,
734: 1321.44,
735: 1323.22,
736: 1324.99,
737: 1326.77,
738: 1328.54,
739: 1330.31,
740: 1332.09,
741: 1333.86,
742: 1335.64,
743: 1337.41,
744: 1339.19,
745: 1340.97,
746: 1342.74,
747: 1344.52,
748: 1346.29,
749: 1348.07,
750: 1349.84,
751: 1351.62,
752: 1353.39,
753: 1355.17,
754: 1356.95,
755: 1358.72,
756: 1360.5,
757: 1362.27,
758: 1364.05,
759: 1365.82,
760: 1367.6,
761: 1369.37,
762: 1371.15,
763: 1372.93,
764: 1374.7,
765: 1376.48,
766: 1378.25,
767: 1380.03,
768: 1381.8,
769: 1383.58,
770: 1385.35,
771: 1387.13,
772: 1388.91,
773: 1390.68,
774: 1392.46,
775: 1394.23,
776: 1396.01,
777: 1397.78,
778: 1399.56,
779: 1401.33,
780: 1403.11,
781: 1404.89,
782: 1406.66,
783: 1408.44,
784: 1410.21,
785: 1411.99,
786: 1413.76,
787: 1415.54,
788: 1417.31,
789: 1419.09,
790: 1420.87,
791: 1422.64,
792: 1424.42,
793: 1426.19,
794: 1427.97,
795: 1429.74,
796: 1431.52,
797: 1433.29,
798: 1435.07,
799: 1436.85,
800: 1438.62,
801: 1440.4,
802: 1442.17,
803: 1443.95,
804: 1445.72,
805: 1447.5,
806: 1449.27,
807: 1451.05,
808: 1452.83,
809: 1454.6,
810: 1456.38,
811: 1458.15,
812: 1459.93,
813: 1461.7,
814: 1463.48,
815: 1465.25,
816: 1467.03,
817: 1468.81,
818: 1470.58,
819: 1472.36,
820: 1474.13,
821: 1475.91,
822: 1477.68,
823: 1479.46,
824: 1481.23,
825: 1483.01,
826: 1484.78,
827: 1486.56,
828: 1488.34,
829: 1490.11,
830: 1491.89,
831: 1493.66,
832: 1495.44,
833: 1497.21,
834: 1498.99,
835: 1500.76,
836: 1502.54,
837: 1504.32,
838: 1506.09,
839: 1507.87,
840: 1509.64,
841: 1511.42,
842: 1513.19,
843: 1514.97,
844: 1516.74,
845: 1518.52,
846: 1520.3,
847: 1522.07,
848: 1523.85,
849: 1525.62,
850: 1527.4,
851: 1529.17,
852: 1530.95,
853: 1532.72,
854: 1534.5,
855: 1536.28,
856: 1538.05,
857: 1539.83,
858: 1541.6,
859: 1543.38,
860: 1545.15,
861: 1546.93,
862: 1548.7,
863: 1550.48,
864: 1552.26,
865: 1554.03,
866: 1555.81,
867: 1557.58,
868: 1559.36,
869: 1561.13,
870: 1562.91,
871: 1564.68,
872: 1566.46,
873: 1568.24,
874: 1570.01,
875: 1571.79,
876: 1573.56,
877: 1575.34,
878: 1577.11,
879: 1578.89,
880: 1580.66,
881: 1582.44,
882: 1584.22,
883: 1585.99,
884: 1587.77,
885: 1589.54,
886: 1591.32,
887: 1593.09,
888: 1594.87,
889: 1596.64,
890: 1598.42,
891: 1600.2,
892: 1601.97,
893: 1603.75,
894: 1605.51,
895: 1607.28,
896: 1609.04,
897: 1610.81,
898: 1612.57,
899: 1614.33,
900: 1616.1,
901: 1617.86,
902: 1619.62,
903: 1621.39,
904: 1623.15,
905: 1624.92,
906: 1626.68,
907: 1628.44,
908: 1630.21,
909: 1631.97,
910: 1633.74,
911: 1635.5,
912: 1637.26,
913: 1639.03,
914: 1640.79,
915: 1642.55,
916: 1644.32,
917: 1646.08,
918: 1647.85,
919: 1649.61,
920: 1651.37,
921: 1653.14,
922: 1654.9,
923: 1656.67,
924: 1658.43,
925: 1660.19,
926: 1661.96,
927: 1663.72,
928: 1665.48,
929: 1667.25,
930: 1669.01,
931: 1670.78,
932: 1672.54,
933: 1674.3,
934: 1676.07,
935: 1677.83,
936: 1679.59,
937: 1681.36,
938: 1683.12,
939: 1684.89,
940: 1686.65,
941: 1688.41,
942: 1690.18,
943: 1691.94,
944: 1693.71,
945: 1695.47,
946: 1697.23,
947: 1699,
948: 1700.76,
949: 1702.52,
950: 1704.29,
951: 1706.05,
952: 1707.82,
953: 1709.58,
954: 1711.34,
955: 1713.11,
956: 1714.87,
957: 1716.64,
958: 1718.4,
959: 1720.16,
960: 1721.93,
961: 1723.69,
962: 1725.45,
963: 1727.22,
964: 1728.98,
965: 1730.75,
966: 1732.51,
967: 1734.27,
968: 1736.04,
969: 1737.8,
970: 1739.57,
971: 1741.33,
972: 1743.09,
973: 1744.86,
974: 1746.62,
975: 1748.38,
976: 1750.15,
977: 1751.91,
978: 1753.68,
979: 1755.44,
980: 1757.2,
981: 1758.97,
982: 1760.73,
983: 1762.5,
984: 1764.26,
985: 1766.02,
986: 1767.79,
987: 1769.55,
988: 1771.31,
989: 1773.08,
990: 1774.84,
991: 1776.61,
992: 1778.37,
993: 1780.13,
994: 1781.9,
995: 1783.66,
996: 1785.42,
997: 1787.19,
998: 1788.95,
999: 1790.72,
1000: 1792.48,
1001: 1794.24,
1002: 1796.01,
1003: 1797.77,
1004: 1799.54,
1005: 1801.3,
1006: 1803.06,
1007: 1804.83,
1008: 1806.59,
1009: 1808.35,
1010: 1810.12,
1011: 1811.88,
1012: 1813.65,
1013: 1815.41,
1014: 1817.17,
1015: 1818.94,
1016: 1820.7,
1017: 1822.47,
1018: 1824.23,
1019: 1825.99,
1020: 1827.76,
1021: 1829.52,
1022: 1831.29,
1023: 1833.05,
1024: 1834.82,
1025: 1836.58,
1026: 1838.34,
1027: 1840.11,
1028: 1841.87,
1029: 1843.64,
1030: 1845.4,
1031: 1847.16,
1032: 1848.93,
1033: 1850.69,
1034: 1852.46,
1035: 1854.22,
1036: 1855.99,
1037: 1857.75,
1038: 1859.51,
1039: 1861.28,
1040: 1863.04,
1041: 1864.81,
1042: 1866.57,
1043: 1868.34,
1044: 1870.1},
  D:{0:0,1:24.27,2:26.03,3:27.8,4: 29.56,5: 31.33,6: 33.1,
7: 34.86,
8: 36.63,
9: 38.39,
10: 40.16,
11: 41.92,
12: 43.69,
13: 45.45,
14: 47.22,
15: 48.98,
16: 50.75,
17: 52.51,
18: 54.28,
19: 56.04,
20: 57.81,
21: 59.57,
22: 61.34,
23: 63.1,
24: 64.87,
25: 66.63,
26: 68.4,
27: 70.16,
28: 71.93,
29: 73.69,
30: 75.46,
31: 77.22,
32: 78.99,
33: 80.76,
34: 82.53,
35: 84.3,
36: 86.07,
37: 87.83,
38: 89.6,
39: 91.37,
40: 93.14,
41: 94.91,
42: 96.68,
43: 98.45,
44: 100.22,
45: 101.99,
46: 103.76,
47: 105.53,
48: 107.3,
49: 109.07,
50: 110.84,
51: 112.62,
52: 114.39,
53: 116.16,
54: 117.93,
55: 119.7,
56: 121.47,
57: 123.25,
58: 125.02,
59: 126.79,
60: 128.56,
61: 130.33,
62: 132.11,
63: 133.88,
64: 135.65,
65: 137.42,
66: 139.19,
67: 140.96,
68: 142.74,
69: 144.51,
70: 146.28,
71: 148.05,
72: 149.82,
73: 151.59,
74: 153.36,
75: 155.13,
76: 156.9,
77: 158.67,
78: 160.44,
79: 162.21,
80: 163.98,
81: 165.75,
82: 167.52,
83: 169.29,
84: 171.06,
85: 172.82,
86: 174.59,
87: 176.36,
88: 178.13,
89: 179.9,
90: 181.67,
91: 183.44,
92: 185.21,
93: 186.98,
94: 188.75,
95: 190.52,
96: 192.28,
97: 194.05,
98: 195.81,
99: 197.58,
100: 199.34,
101: 201.11,
102: 202.87,
103: 204.64,
104: 206.4,
105: 208.16,
106: 209.93,
107: 211.69,
108: 213.46,
109: 215.22,
110: 216.99,
111: 218.75,
112: 220.52,
113: 222.28,
114: 224.05,
115: 225.81,
116: 227.58,
117: 229.34,
118: 231.11,
119: 232.87,
120: 234.64,
121: 236.4,
122: 238.17,
123: 239.93,
124: 241.7,
125: 243.46,
126: 245.23,
127: 246.99,
128: 248.76,
129: 250.52,
130: 252.29,
131: 254.05,
132: 255.82,
133: 257.58,
134: 259.35,
135: 261.11,
136: 262.88,
137: 264.64,
138: 266.41,
139: 268.17,
140: 269.94,
141: 271.71,
142: 273.47,
143: 275.24,
144: 277,
145: 278.77,
146: 280.54,
147: 282.3,
148: 284.07,
149: 285.84,
150: 287.6,
151: 289.37,
152: 291.13,
153: 292.9,
154: 294.67,
155: 296.43,
156: 298.2,
157: 299.97,
158: 301.73,
159: 303.5,
160: 305.26,
161: 307.03,
162: 308.8,
163: 310.56,
164: 312.33,
165: 314.1,
166: 315.86,
167: 317.63,
168: 319.39,
169: 321.16,
170: 322.93,
171: 324.69,
172: 326.46,
173: 328.22,
174: 329.99,
175: 331.76,
176: 333.52,
177: 335.29,
178: 337.06,
179: 338.82,
180: 340.59,
181: 342.35,
182: 344.12,
183: 345.89,
184: 347.65,
185: 349.42,
186: 351.19,
187: 352.95,
188: 354.72,
189: 356.48,
190: 358.25,
191: 360.02,
192: 361.78,
193: 363.55,
194: 365.32,
195: 367.08,
196: 368.85,
197: 370.61,
198: 372.38,
199: 374.15,
200: 375.91,
201: 377.68,
202: 379.45,
203: 381.21,
204: 382.98,
205: 384.74,
206: 386.51,
207: 388.28,
208: 390.04,
209: 391.81,
210: 393.58,
211: 395.34,
212: 397.11,
213: 398.87,
214: 400.64,
215: 402.41,
216: 404.17,
217: 405.94,
218: 407.7,
219: 409.47,
220: 411.24,
221: 413,
222: 414.77,
223: 416.54,
224: 418.3,
225: 420.07,
226: 421.83,
227: 423.6,
228: 425.37,
229: 427.13,
230: 428.9,
231: 430.67,
232: 432.43,
233: 434.2,
234: 435.96,
235: 437.73,
236: 439.5,
237: 441.26,
238: 443.03,
239: 444.8,
240: 446.56,
241: 448.33,
242: 450.09,
243: 451.86,
244: 453.63,
245: 455.39,
246: 457.16,
247: 458.93,
248: 460.69,
249: 462.46,
250: 464.22,
251: 465.99,
252: 467.76,
253: 469.52,
254: 471.29,
255: 473.06,
256: 474.82,
257: 476.59,
258: 478.35,
259: 480.12,
260: 481.89,
261: 483.65,
262: 485.42,
263: 487.18,
264: 488.95,
265: 490.72,
266: 492.48,
267: 494.25,
268: 496.02,
269: 497.78,
270: 499.55,
271: 501.31,
272: 503.08,
273: 504.85,
274: 506.61,
275: 508.38,
276: 510.15,
277: 511.91,
278: 513.68,
279: 515.44,
280: 517.21,
281: 518.98,
282: 520.74,
283: 522.51,
284: 524.28,
285: 526.04,
286: 527.81,
287: 529.57,
288: 531.34,
289: 533.11,
290: 534.87,
291: 536.64,
292: 538.4,
293: 540.17,
294: 541.93,
295: 543.7,
296: 545.46,
297: 547.23,
298: 549,
299: 550.76,
300: 552.53,
301: 554.29,
302: 556.06,
303: 557.82,
304: 559.59,
305: 561.35,
306: 563.12,
307: 564.88,
308: 566.65,
309: 568.41,
310: 570.18,
311: 571.94,
312: 573.71,
313: 575.47,
314: 577.24,
315: 579,
316: 580.77,
317: 582.53,
318: 584.3,
319: 586.06,
320: 587.83,
321: 589.59,
322: 591.36,
323: 593.12,
324: 594.89,
325: 596.65,
326: 598.42,
327: 600.18,
328: 601.95,
329: 603.72,
330: 605.48,
331: 607.25,
332: 609.01,
333: 610.78,
334: 612.54,
335: 614.31,
336: 616.07,
337: 617.84,
338: 619.6,
339: 621.37,
340: 623.13,
341: 624.9,
342: 626.66,
343: 628.43,
344: 630.19,
345: 631.96,
346: 633.72,
347: 635.49,
348: 637.25,
349: 639.02,
350: 640.78,
351: 642.55,
352: 644.31,
353: 646.08,
354: 647.84,
355: 649.61,
356: 651.37,
357: 653.14,
358: 654.9,
359: 656.67,
360: 658.43,
361: 660.2,
362: 661.97,
363: 663.73,
364: 665.5,
365: 667.26,
366: 669.03,
367: 670.79,
368: 672.56,
369: 674.32,
370: 676.09,
371: 677.85,
372: 679.62,
373: 681.38,
374: 683.15,
375: 684.91,
376: 686.68,
377: 688.44,
378: 690.21,
379: 691.97,
380: 693.74,
381: 695.5,
382: 697.27,
383: 699.03,
384: 700.8,
385: 702.56,
386: 704.33,
387: 706.09,
388: 707.86,
389: 709.62,
390: 711.39,
391: 713.15,
392: 714.92,
393: 716.69,
394: 718.45,
395: 720.22,
396: 721.98,
397: 723.75,
398: 725.51,
399: 727.28,
400: 729.04,
401: 730.81,
402: 732.57,
403: 734.34,
404: 736.1,
405: 737.87,
406: 739.63,
407: 741.4,
408: 743.16,
409: 744.93,
410: 746.69,
411: 748.46,
412: 750.22,
413: 751.99,
414: 753.75,
415: 755.52,
416: 757.28,
417: 759.05,
418: 760.81,
419: 762.58,
420: 764.34,
421: 766.11,
422: 767.87,
423: 769.64,
424: 771.4,
425: 773.17,
426: 774.94,
427: 776.7,
428: 778.47,
429: 780.23,
430: 782,
431: 783.76,
432: 785.53,
433: 787.29,
434: 789.06,
435: 790.82,
436: 792.59,
437: 794.35,
438: 796.12,
439: 797.88,
440: 799.65,
441: 801.41,
442: 803.18,
443: 804.94,
444: 806.71,
445: 808.48,
446: 810.25,
447: 812.02,
448: 813.79,
449: 815.56,
450: 817.33,
451: 819.1,
452: 820.87,
453: 822.64,
454: 824.41,
455: 826.18,
456: 827.95,
457: 829.71,
458: 831.48,
459: 833.25,
460: 835.02,
461: 836.79,
462: 838.56,
463: 840.33,
464: 842.1,
465: 843.87,
466: 845.64,
467: 847.41,
468: 849.18,
469: 850.95,
470: 852.72,
471: 854.49,
472: 856.26,
473: 858.02,
474: 859.79,
475: 861.56,
476: 863.33,
477: 865.1,
478: 866.87,
479: 868.64,
480: 870.41,
481: 872.18,
482: 873.95,
483: 875.72,
484: 877.49,
485: 879.26,
486: 881.03,
487: 882.8,
488: 884.57,
489: 886.34,
490: 888.1,
491: 889.87,
492: 891.64,
493: 893.41,
494: 895.18,
495: 896.95,
496: 898.72,
497: 900.49,
498: 902.26,
499: 904.03,
500: 905.8,
501: 907.57,
502: 909.34,
503: 911.11,
504: 912.88,
505: 914.65,
506: 916.42,
507: 918.18,
508: 919.95,
509: 921.72,
510: 923.49,
511: 925.26,
512: 927.03,
513: 928.8,
514: 930.57,
515: 932.34,
516: 934.11,
517: 935.88,
518: 937.65,
519: 939.42,
520: 941.19,
521: 942.96,
522: 944.73,
523: 946.5,
524: 948.26,
525: 950.03,
526: 951.8,
527: 953.57,
528: 955.34,
529: 957.11,
530: 958.88,
531: 960.65,
532: 962.42,
533: 964.19,
534: 965.96,
535: 967.73,
536: 969.5,
537: 971.27,
538: 973.04,
539: 974.81,
540: 976.58,
541: 978.34,
542: 980.11,
543: 981.88,
544: 983.65,
545: 985.42,
546: 987.19,
547: 988.96,
548: 990.73,
549: 992.5,
550: 994.27,
551: 996.04,
552: 997.81,
553: 999.58,
554: 1001.35,
555: 1003.12,
556: 1004.89,
557: 1006.65,
558: 1008.42,
559: 1010.19,
560: 1011.96,
561: 1013.73,
562: 1015.5,
563: 1017.27,
564: 1019.04,
565: 1020.81,
566: 1022.58,
567: 1024.35,
568: 1026.12,
569: 1027.89,
570: 1029.66,
571: 1031.43,
572: 1033.2,
573: 1034.97,
574: 1036.73,
575: 1038.5,
576: 1040.27,
577: 1042.04,
578: 1043.81,
579: 1045.58,
580: 1047.35,
581: 1049.12,
582: 1050.89,
583: 1052.66,
584: 1054.43,
585: 1056.2,
586: 1057.97,
587: 1059.74,
588: 1061.51,
589: 1063.28,
590: 1065.05,
591: 1066.81,
592: 1068.58,
593: 1070.35,
594: 1072.12,
595: 1073.89,
596: 1075.66,
597: 1077.44,
598: 1079.21,
599: 1080.98,
600: 1082.75,
601: 1084.52,
602: 1086.3,
603: 1088.07,
604: 1089.84,
605: 1091.61,
606: 1093.38,
607: 1095.15,
608: 1096.93,
609: 1098.7,
610: 1100.47,
611: 1102.24,
612: 1104.01,
613: 1105.79,
614: 1107.56,
615: 1109.33,
616: 1111.1,
617: 1112.87,
618: 1114.65,
619: 1116.42,
620: 1118.19,
621: 1119.96,
622: 1121.73,
623: 1123.51,
624: 1125.28,
625: 1127.05,
626: 1128.82,
627: 1130.59,
628: 1132.36,
629: 1134.14,
630: 1135.91,
631: 1137.68,
632: 1139.45,
633: 1141.22,
634: 1143,
635: 1144.77,
636: 1146.54,
637: 1148.31,
638: 1150.08,
639: 1151.86,
640: 1153.63,
641: 1155.4,
642: 1157.17,
643: 1158.94,
644: 1160.71,
645: 1162.49,
646: 1164.26,
647: 1166.03,
648: 1167.8,
649: 1169.57,
650: 1171.35,
651: 1173.12,
652: 1174.89,
653: 1176.66,
654: 1178.43,
655: 1180.21,
656: 1181.98,
657: 1183.75,
658: 1185.52,
659: 1187.29,
660: 1189.06,
661: 1190.84,
662: 1192.61,
663: 1194.38,
664: 1196.15,
665: 1197.92,
666: 1199.7,
667: 1201.47,
668: 1203.24,
669: 1205.01,
670: 1206.78,
671: 1208.56,
672: 1210.33,
673: 1212.1,
674: 1213.87,
675: 1215.64,
676: 1217.41,
677: 1219.19,
678: 1220.96,
679: 1222.73,
680: 1224.5,
681: 1226.27,
682: 1228.05,
683: 1229.82,
684: 1231.59,
685: 1233.36,
686: 1235.13,
687: 1236.91,
688: 1238.68,
689: 1240.45,
690: 1242.22,
691: 1243.99,
692: 1245.77,
693: 1247.54,
694: 1249.31,
695: 1251.08,
696: 1252.85,
697: 1254.62,
698: 1256.4,
699: 1258.17,
700: 1259.94,
701: 1261.71,
702: 1263.48,
703: 1265.26,
704: 1267.03,
705: 1268.8,
706: 1270.57,
707: 1272.34,
708: 1274.12,
709: 1275.89,
710: 1277.66,
711: 1279.43,
712: 1281.2,
713: 1282.97,
714: 1284.75,
715: 1286.52,
716: 1288.29,
717: 1290.06,
718: 1291.83,
719: 1293.61,
720: 1295.38,
721: 1297.15,
722: 1298.92,
723: 1300.69,
724: 1302.47,
725: 1304.24,
726: 1306.01,
727: 1307.78,
728: 1309.55,
729: 1311.32,
730: 1313.1,
731: 1314.87,
732: 1316.64,
733: 1318.41,
734: 1320.18,
735: 1321.96,
736: 1323.73,
737: 1325.5,
738: 1327.27,
739: 1329.04,
740: 1330.82,
741: 1332.59,
742: 1334.36,
743: 1336.13,
744: 1337.9,
745: 1339.68,
746: 1341.45,
747: 1343.22,
748: 1344.99,
749: 1346.77,
750: 1348.54,
751: 1350.31,
752: 1352.08,
753: 1353.86,
754: 1355.63,
755: 1357.4,
756: 1359.18,
757: 1360.95,
758: 1362.72,
759: 1364.5,
760: 1366.27,
761: 1368.04,
762: 1369.82,
763: 1371.59,
764: 1373.36,
765: 1375.14,
766: 1376.91,
767: 1378.68,
768: 1380.46,
769: 1382.23,
770: 1384,
771: 1385.78,
772: 1387.55,
773: 1389.32,
774: 1391.09,
775: 1392.87,
776: 1394.64,
777: 1396.41,
778: 1398.19,
779: 1399.96,
780: 1401.73,
781: 1403.51,
782: 1405.28,
783: 1407.05,
784: 1408.83,
785: 1410.6,
786: 1412.37,
787: 1414.15,
788: 1415.92,
789: 1417.69,
790: 1419.47,
791: 1421.24,
792: 1423.01,
793: 1424.79,
794: 1426.56,
795: 1428.33,
796: 1430.1,
797: 1431.88,
798: 1433.65,
799: 1435.42,
800: 1437.2,
801: 1438.97,
802: 1440.74,
803: 1442.52,
804: 1444.29,
805: 1446.06,
806: 1447.84,
807: 1449.61,
808: 1451.38,
809: 1453.16,
810: 1454.93,
811: 1456.7,
812: 1458.48,
813: 1460.25,
814: 1462.02,
815: 1463.8,
816: 1465.57,
817: 1467.34,
818: 1469.11,
819: 1470.89,
820: 1472.66,
821: 1474.43,
822: 1476.21,
823: 1477.98,
824: 1479.75,
825: 1481.53,
826: 1483.3,
827: 1485.07,
828: 1486.85,
829: 1488.62,
830: 1490.39,
831: 1492.17,
832: 1493.94,
833: 1495.71,
834: 1497.49,
835: 1499.26,
836: 1501.03,
837: 1502.81,
838: 1504.58,
839: 1506.35,
840: 1508.12,
841: 1509.9,
842: 1511.67,
843: 1513.44,
844: 1515.22,
845: 1516.99,
846: 1518.76,
847: 1520.54,
848: 1522.31,
849: 1524.08,
850: 1525.86,
851: 1527.63,
852: 1529.4,
853: 1531.18,
854: 1532.95,
855: 1534.72,
856: 1536.5,
857: 1538.27,
858: 1540.04,
859: 1541.82,
860: 1543.59,
861: 1545.36,
862: 1547.13,
863: 1548.91,
864: 1550.68,
865: 1552.45,
866: 1554.23,
867: 1556,
868: 1557.77,
869: 1559.55,
870: 1561.32,
871: 1563.09,
872: 1564.87,
873: 1566.64,
874: 1568.41,
875: 1570.19,
876: 1571.96,
877: 1573.73,
878: 1575.51,
879: 1577.28,
880: 1579.05,
881: 1580.83,
882: 1582.6,
883: 1584.37,
884: 1586.14,
885: 1587.92,
886: 1589.69,
887: 1591.46,
888: 1593.24,
889: 1595.01,
890: 1596.78,
891: 1598.56,
892: 1600.33,
893: 1602.1,
894: 1603.88,
895: 1605.65,
896: 1607.42,
897: 1609.2,
898: 1610.97,
899: 1612.74,
900: 1614.52,
901: 1616.29,
902: 1618.07,
903: 1619.84,
904: 1621.61,
905: 1623.39,
906: 1625.16,
907: 1626.94,
908: 1628.71,
909: 1630.49,
910: 1632.26,
911: 1634.04,
912: 1635.81,
913: 1637.59,
914: 1639.36,
915: 1641.13,
916: 1642.91,
917: 1644.68,
918: 1646.46,
919: 1648.23,
920: 1650.01,
921: 1651.78,
922: 1653.56,
923: 1655.33,
924: 1657.1,
925: 1658.88,
926: 1660.65,
927: 1662.43,
928: 1664.2,
929: 1665.98,
930: 1667.75,
931: 1669.53,
932: 1671.3,
933: 1673.07,
934: 1674.85,
935: 1676.62,
936: 1678.4,
937: 1680.17,
938: 1681.95,
939: 1683.72,
940: 1685.5,
941: 1687.27,
942: 1689.04,
943: 1690.82,
944: 1692.59,
945: 1694.37,
946: 1696.14,
947: 1697.92,
948: 1699.69,
949: 1701.47,
950: 1703.24,
951: 1705.02,
952: 1706.79,
953: 1708.56,
954: 1710.34,
955: 1712.11,
956: 1713.89,
957: 1715.66,
958: 1717.44,
959: 1719.21,
960: 1720.99,
961: 1722.76,
962: 1724.53,
963: 1726.31,
964: 1728.08,
965: 1729.86,
966: 1731.63,
967: 1733.41,
968: 1735.18,
969: 1736.96,
970: 1738.73,
971: 1740.5,
972: 1742.28,
973: 1744.05,
974: 1745.83,
975: 1747.6,
976: 1749.38,
977: 1751.15,
978: 1752.93,
979: 1754.7,
980: 1756.48,
981: 1758.25,
982: 1760.02,
983: 1761.8,
984: 1763.57,
985: 1765.35,
986: 1767.12,
987: 1768.9,
988: 1770.67,
989: 1772.45,
990: 1774.22,
991: 1775.99,
992: 1777.77,
993: 1779.54,
994: 1781.32,
995: 1783.09,
996: 1784.87,
997: 1786.64,
998: 1788.42,
999: 1790.19,
1000: 1791.96,
1001: 1793.74,
1002: 1795.51,
1003: 1797.29,
1004: 1799.06,
1005: 1800.84,
1006: 1802.61,
1007: 1804.39,
1008: 1806.16,
1009: 1807.93,
1010: 1809.71,
1011: 1811.48,
1012: 1813.26,
1013: 1815.03,
1014: 1816.81,
1015: 1818.58,
1016: 1820.36,
1017: 1822.13,
1018: 1823.91,
1019: 1825.68,
1020: 1827.46,
1021: 1829.23,
1022: 1831.01,
1023: 1832.78,
1024: 1834.56,
1025: 1836.33,
1026: 1838.1,
1027: 1839.88,
1028: 1841.65,
1029: 1843.43,
1030: 1845.2,
1031: 1846.98,
1032: 1848.75,
1033: 1850.53,
1034: 1852.3,
1035: 1854.08,
1036: 1855.85,
1037: 1857.63,
1038: 1859.4,
1039: 1861.18,
1040: 1862.95,
1041: 1864.73,
1042: 1866.5,
1043: 1868.28,
1044: 1870.05,
1045: 1871.83,
1046: 1873.6,
1047: 1875.38,
1048: 1877.15,
1049: 1878.93,1050: 1880.7,
1051: 1882.48}
};


/* ========= Helpers ========= */
const f2 = v => Number(v || 0).toFixed(2);     // app â†’ 2 decimals
const r0 = v => Math.round(Number(v || 0));   // whatsapp â†’ integer

let trucks = [];
let savedDays = JSON.parse(localStorage.getItem("savedDays") || "{}");
let isSaved = true;

/* ========= Elements ========= */
const beforeCC = document.getElementById("beforeCC");
const afterCC = document.getElementById("afterCC");
const afterDrainCC = document.getElementById("afterDrainCC");
const afterHamraCC = document.getElementById("afterHamraCC");

const beforeBBL = document.getElementById("beforeBBL");
const afterBBL = document.getElementById("afterBBL");
const afterDrainBBL = document.getElementById("afterDrainBBL");
const afterHamraBBL = document.getElementById("afterHamraBBL");

const actualTankNet = document.getElementById("actualTankNet");
const status = document.getElementById("status");
const drainQty = document.getElementById("drainQty");

const tankSelect = document.getElementById("tankSelect");
const savedDaysList = document.getElementById("savedDaysList");
const dischargeDate = document.getElementById("dischargeDate");

document.addEventListener("DOMContentLoaded", () => {
  addTruck();
  renderSaved();
});

/* ========= Trucks ========= */
function addTruck(){
  trucks.push({driver:"",date:"",station:"",qty:"",start:"",end:""});
  isSaved = false;
  renderTrucks();
}

function deleteTruck(i){
  if(!confirm("âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ±ÙƒÙ‡ØŸ")) return;
  trucks.splice(i,1);
  isSaved = false;
  renderTrucks();
  liveCalc();
}

function renderTrucks(){
  const list = document.getElementById("trucksList");
  list.innerHTML = "";
  trucks.forEach((t,i)=>{
    const minutes = calcMinutes(t.start,t.end);
    list.innerHTML += `
      <div class="card">
        <b>ğŸšš Truck ${i+1}</b> â€“ unloading time: ${minutes} min

        <div class="row">
          <div><label>Driver (Ø§Ù„Ø³Ø§Ø¦Ù‚) </label><input value="${t.driver}" oninput="trucks[${i}].driver=this.value"></div>
          <div><label>Date (ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙØ±ÙŠØº) </label><input value="${t.date}" oninput="trucks[${i}].date=this.value"></div>
        </div>

        <div class="row">
          <div><label>Station (Ø§Ù„Ù…Ø­Ø·Ù‡) </label><input value="${t.station}" oninput="trucks[${i}].station=this.value"></div>
          <div><label>Quantity (Ø§Ù„ÙƒÙ…ÙŠÙ‡ ) (BBL)</label><input type="number" value="${t.qty}" oninput="trucks[${i}].qty=this.value;liveCalc()"></div>
        </div>

        <div class="row">
          <div><label>Start Time (Ø¨Ø¯Ø§ÙŠØ© ÙˆÙ‚Øª Ø§Ù„ØªÙØ±ÙŠØº) </label><input type="time" value="${t.start}" oninput="trucks[${i}].start=this.value;renderTrucks()"></div>
          <div><label>End Time (Ù†Ù‡Ø§ÙŠØ© ÙˆÙ‚Øª Ø§Ù„ØªÙØ±ÙŠØº) </label><input type="time" value="${t.end}" oninput="trucks[${i}].end=this.value;renderTrucks()"></div>
        </div>

        <button onclick="deleteTruck(${i})">ğŸ—‘ Delete</button>
      </div>
    `;
  });
}

function calcMinutes(start,end){
  if(!start || !end) return 0;
  let s = new Date(`1970-01-01T${start}`);
  let e = new Date(`1970-01-01T${end}`);
  if(e < s) e.setDate(e.getDate()+1);
  return Math.round((e - s) / 60000);
}

/* ========= Calculations ========= */
function cmToBbl(cm){
  return TABLE[tankSelect.value][cm] ?? 0;
}

function liveCalc(){
  const before = cmToBbl(beforeCC.value);
  const after = cmToBbl(afterCC.value);
  const afterDrain = cmToBbl(afterDrainCC.value);
  const afterHamra = cmToBbl(afterHamraCC.value);

  const shipped = trucks.reduce((s,t)=>s + Number(t.qty || 0), 0);
  const diff = r0(after) - r0(before) - shipped;
  const drain = afterDrain ? after - afterDrain : 0;

  beforeBBL.innerText = f2(before) + " BBL";
  afterBBL.innerText = f2(after) + " BBL";
  afterDrainBBL.innerText = f2(afterDrain) + " BBL";
  afterHamraBBL.innerText = f2(afterHamra) + " BBL";

  actualTankNet.innerText = f2(diff);
  drainQty.innerText = f2(drain);

  status.innerText = diff > 0 ? "More" : diff < 0 ? "Less" : "OK";
}

/* ========= Clear / Save ========= */
function clearInputs(){
  if(!isSaved && !confirm("Unsaved data will be lost")) return;
  trucks = [];
  addTruck();
  beforeCC.value = afterCC.value = afterDrainCC.value = afterHamraCC.value = "";
  dischargeDate.value = "";
  isSaved = true;
  liveCalc();
}

function saveDay(){
  if(!dischargeDate.value) return alert("Please write date");
  savedDays[dischargeDate.value] = {
    tank:tankSelect.value,
    beforeCC:beforeCC.value,
    afterCC:afterCC.value,
    afterDrainCCdrain:afterDrainCC.value,
    afterHamraCC:afterHamraCC.value,
    trucks:JSON.parse(JSON.stringify(trucks))
  };
  localStorage.setItem("savedDays",JSON.stringify(savedDays));
  isSaved = true;
  renderSaved();
}

function renderSaved(){
  savedDaysList.innerHTML = "";
  Object.keys(savedDays).forEach(d=>{
    savedDaysList.innerHTML += `
      <div class="saved-item">
        <span>${d}</span>
        <button onclick="editDay('${d}')">âœï¸</button>
        <button onclick="sendSavedWhatsApp('${d}')">ğŸ“²</button>
        <button onclick="deleteDay('${d}')">ğŸ—‘</button>
      </div>
    `;
  });
}

function deleteDay(d){
  if(!confirm("Delete this saved day?")) return;
  delete savedDays[d];
  localStorage.setItem("savedDays", JSON.stringify(savedDays));
  renderSaved();
}

function editDay(d){
  const s = savedDays[d];
  tankSelect.value = s.tank;
  beforeCC.value = s.beforeCC;
  afterCC.value = s.afterCC;
  afterDrainCC.value = s.afterDrainCC;
  afterHamraCC.value = s.afterHamraCC;
  trucks = JSON.parse(JSON.stringify(s.trucks));
  dischargeDate.value = d;
  renderTrucks();
  liveCalc();
  isSaved = true;
}

function formatDayMonth(d){
  if(!d) return "";
  const [day, month, year] = d.split("-");
  const months = ["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];
  return Number(day) + months[Number(month) - 1];
}

function formatDayMonthYear(d){
  if(!d) return "";
  const [day, month, year] = d.split("-");
  const months = ["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];
  return Number(day) + months[Number(month) - 1] + year;
}

/* ========= WhatsApp ========= */
function sendWhatsApp(){
  const stations = [...new Set(trucks.map(t=>t.station).filter(Boolean))].join(" / ");

  let msg = `*DAPETCO Unloading Station*\n*${formatDayMonthYear(dischargeDate.value)}*\n\n`;

  msg += `ã€‹Shipped ${trucks.length} truck(s) from\n${stations}\n\n`;

  trucks.forEach(t=>{
    msg += `ã€‹Ticket no\n`;
    msg += `\tâ— shipped @ ${formatDayMonth(t.date)}\n`;
    msg += `\tâ— shipped volume : ${r0(t.qty)} bbl\n`;
    msg += `\tâ— unloading running time: ${r0(calcMinutes(t.start,t.end))} min\n`;
  });

  msg += `\nã€‹Received in TK(${tankSelect.value})\n`;
  msg += `\tâ— Last close for the tank = ${r0(beforeCC.value)} cm = ${r0(cmToBbl(beforeCC.value))} bbl\n\n`;

  msg += `ã€‹After unloading in TK\n`;
  msg += `\tâ— Gross level = ${r0(afterCC.value)} cm = ${r0(cmToBbl(afterCC.value))} bbl\n`;
  msg += `( ${r0(Math.abs(Number(actualTankNet.innerText)))} bbl ${status.innerText.toLowerCase()} than sent )\n\n`;

  if(afterDrainCC.value){
    msg += `\tâ— Gross level after drain = ${r0(afterDrainCC.value)} cm = ${r0(cmToBbl(afterDrainCC.value))} bbl\n`;
    msg += `\t( ${r0(drainQty.innerText)} bbl drain free water )\n\n`;
  }

  msg += `ã€‹Taking samples to DAPETCO lab.\n\tâ— BS&W :  % \n\tâ— salt content :  PTB \n\tâ— API :  Â° \n\n`;
  msg += `ã€‹Shipping to El-hamra\n`;
  msg += `\tâ— Close level = ${r0(afterHamraCC.value)} cm = ${r0(cmToBbl(afterHamraCC.value))} bbl`;
 
  
  
  /* ===== Trucks full details ===== */
  msg += `\nâœ‚--------------------------------------------âœ‚\n`;
  msg += `Trucks details\n\n`;

  trucks.forEach((t,i)=>{
    msg += `Truck ${i+1}\n`;
    msg += `Driver : ${t.driver || "-"}\n`;
    msg += `Date : ${t.date || "-"}\n`;
    msg += `Station : ${t.station || "-"}\n`;
    msg += `Quantity : ${r0(t.qty)} bbl\n`;
    msg += `Start time : ${t.start || "-"}\n`;
    msg += `End time : ${t.end || "-"}\n\n`;
  });
  
 window.open("https://wa.me/?text=" + encodeURIComponent(msg));
}

function sendSavedWhatsApp(d){
  const backup = JSON.parse(JSON.stringify({
    trucks, date:dischargeDate.value, tank:tankSelect.value,
    before:beforeCC.value, after:afterCC.value,
    drain:afterDrainCC.value, hamra:afterHamraCC.value
  }));

  editDay(d);
  sendWhatsApp();

  trucks = backup.trucks;
  dischargeDate.value = backup.date;
  tankSelect.value = backup.tank;
  beforeCC.value = backup.before;
  afterCC.value = backup.after;
  afterDrainCC.value = backup.drain;
  afterHamraCC.value = backup.hamra;

  renderTrucks();
  liveCalc();
}

/* ========= PWA ========= */
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("./service-worker.js");
  });
} 